(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{200:(e,t,s)=>{Promise.resolve().then(s.bind(s,1276))},1276:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5155),a=s(2115),i=s(2243),l=s(6766),n=s(6874),d=s.n(n),o=s(5695),c=s(8088);function m(){let e=(0,o.useRouter)(),{cartItems:t,removeFromCart:s,updateQuantity:n,totalPrice:m,clearCart:x}=(0,c._)(),[h,u]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"pt-24 pb-16",children:[(0,r.jsx)("div",{className:"bg-[var(--primary)] text-white py-16",children:(0,r.jsxs)("div",{className:"container-custom text-center",children:[(0,r.jsx)(i.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl md:text-5xl font-bold mb-4",children:"购物车"}),(0,r.jsx)(i.P.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"80px"},transition:{duration:.5,delay:.2},className:"h-1 bg-white mx-auto mb-6"}),(0,r.jsx)(i.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"max-w-2xl mx-auto text-white/90",children:"查看您选择的商品并进行结算"})]})}),(0,r.jsx)("div",{className:"container-custom mt-12",children:0===t.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"购物车是空的"}),(0,r.jsx)("p",{className:"text-[var(--foreground)]/70 mb-8",children:"您的购物车中还没有商品，快去选购吧！"}),(0,r.jsx)(d(),{href:"/menu",className:"bg-[var(--primary)] text-white px-6 py-3 rounded-md hover:bg-[var(--primary-dark)] transition-colors duration-300",children:"浏览菜单"})]}):(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"购物车商品"}),(0,r.jsx)("button",{onClick:x,className:"text-red-500 hover:text-red-700 text-sm font-medium",children:"清空购物车"})]})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>(0,r.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,height:0},className:"p-6 flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[(0,r.jsx)("div",{className:"relative h-20 w-20 rounded-md overflow-hidden flex-shrink-0",children:(0,r.jsx)(l.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("h3",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-[var(--primary)] font-semibold mt-1",children:e.price})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>n(e.id,e.quantity-1),className:"h-8 w-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,r.jsx)("span",{className:"w-6 text-center",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>n(e.id,e.quantity+1),className:"h-8 w-8 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,r.jsx)("button",{onClick:()=>s(e.id),className:"text-red-500 hover:text-red-700",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-[#1a1a1a] rounded-lg shadow-md p-6 sticky top-24",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"订单摘要"}),(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-[var(--foreground)]/70",children:"商品总价"}),(0,r.jsxs)("span",{children:["\xa5",m.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-[var(--foreground)]/70",children:"配送费"}),(0,r.jsx)("span",{children:"\xa50.00"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 flex justify-between font-semibold",children:[(0,r.jsx)("span",{children:"总计"}),(0,r.jsxs)("span",{className:"text-[var(--primary)]",children:["\xa5",m.toFixed(2)]})]})]}),(0,r.jsx)("button",{onClick:()=>{0!==t.length&&(u(!0),setTimeout(()=>{u(!1),e.push("/checkout")},1e3))},disabled:h||0===t.length,className:"w-full py-3 rounded-md font-medium transition-colors duration-300 ".concat(h?"bg-gray-400 cursor-not-allowed":"bg-[var(--primary)] text-white hover:bg-[var(--primary-dark)]"),children:h?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"处理中..."]}):"去结算"})]})})]})})]})}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},8088:(e,t,s)=>{"use strict";s.d(t,{CartProvider:()=>l,_:()=>n});var r=s(5155),a=s(2115);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,a.useState)([]),[n,d]=(0,a.useState)(0),[o,c]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{let t=JSON.parse(e);l(t)}catch(e){console.error("Failed to parse cart from localStorage:",e)}},[]),(0,a.useEffect)(()=>{s.length>0&&localStorage.setItem("cart",JSON.stringify(s))},[s]),(0,a.useEffect)(()=>{d(s.reduce((e,t)=>e+t.quantity,0)),c(s.reduce((e,t)=>e+parseFloat(t.price.replace(/[^\d.]/g,""))*t.quantity,0))},[s]);let m=e=>{l(t=>t.filter(t=>t.id!==e))};return(0,r.jsx)(i.Provider,{value:{cartItems:s,addToCart:e=>{l(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:m,updateQuantity:(e,t)=>{if(t<=0){m(e);return}l(s=>s.map(s=>s.id===e?{...s,quantity:t}:s))},clearCart:()=>{l([]),localStorage.removeItem("cart")},totalItems:n,totalPrice:o},children:t})}function n(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[243,766,874,441,684,358],()=>t(200)),_N_E=e.O()}]);